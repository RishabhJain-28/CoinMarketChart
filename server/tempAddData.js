const moment = require("moment");
const Chart = require("./models/chart");

const dates = [
  "25-Oct-2020",
  "30-Oct-2020",
  "31-Oct-2020",
  "1-Nov-2020",
  "2-Nov-2020",
  "3-Nov-2020",
  "4-Nov-2020",
  "5-Nov-2020",
  "6-Nov-2020",
  "7-Nov-2020",
  "8-Nov-2020",
  "9-Nov-2020",
  "10-Nov-2020",
  "11-Nov-2020",
  "12-Nov-2020",
  "13-Nov-2020",
  "14-Nov-2020",
  "15-Nov-2020",
  "16-Nov-2020",
  "17-Nov-2020",
  "18-Nov-2020",
  "19-Nov-2020",
  "20-Nov-2020",
  "21-Nov-2020",
  "22-Nov-2020",
  "23-Nov-2020",
  "24-Nov-2020",
  "25-Nov-2020",
  "26-Nov-2020",
  "27-Nov-2020",
  "28-Nov-2020",
  "29-Nov-2020",
  "30-Nov-2020",
  "1-Dec-2020",
  "2-Dec-2020",
  "3-Dec-2020",
  "4-Dec-2020",
  "5-Dec-2020",
  "6-Dec-2020",
  "7-Dec-2020",
  "8-Dec-2020",
  "9-Dec-2020",
  "10-Dec-2020",
  "11-Dec-2020",
  "12-Dec-2020",
  "13-Dec-2020",
  "14-Dec-2020",
  "15-Dec-2020",
  "16-Dec-2020",
  "17-Dec-2020",
  "18-Dec-2020",
  "19-Dec-2020",
  "20-Dec-2020",
  "21-Dec-2020",
  "22-Dec-2020",
  "23-Dec-2020",
  "24-Dec-2020",
  "25-Dec-2020",
  "26-Dec-2020",
  "27-Dec-2020",
  "28-Dec-2020",
  "29-Dec-2020",
  "30-Dec-2020",
  "31-Dec-2020",
];
const values = [
  0.0044,
  0.0014,
  0.0013,
  0.0027,
  0.0018,
  0.0028,
  0.00388291,
  0.00251384,
  0.00253075,
  0.00254779,
  0.00267395,
  0.00384934,
  0.00384934,
  0.00375098,
  0.00376522,
  0.00379369,
  0.00379369,
  0.00379369,
  0.00379369,
  0.00415032,
  0.0045394,
  0.0045394,
  0.0045394,
  0.0045394,
  0.0045394,
  0.0045394,
  0.00536059,
  0.00536059,
  0.00536059,
  0.00536059,
  0.00419912,
  0.00419912,
  0.00432833,
  0.00432833,
  0.00428866,
  0.00428866,
  0.00428866,
  0.00428866,
  0.00428692,
  0.00428692,
  0.00463779,
  0.0046121,
  0.0046121,
  0.00461019,
  0.00461019,
  0.00461019,
  0.00508061,
  0.00508061,
  0.00508061,
  0.00508061,
  0.00508061,
  0.00508584,
  0.00501774,
  0.00501774,
  0.00501774,
  0.00501774,
  0.00501774,
  0.00501774,
  0.00501774,
  0.00661222,
  0.00661222,
  0.00661222,
  0.00661222,
  0.00653027,
];
const ONE_PRICES_USD = [
  0.0047639,
  0.0042,
  0.00421133,
  0.004871,
  0.00487051,
  0.0048,
  0.00435558,
  0.00435558,
  0.00507239,
  0.00487014,
  0.00489957,
  0.0050563,
  0.00514832,
  0.00496594,
  0.0052129,
  0.00493449,
  0.00493449,
  0.00493449,
  0.00493449,
  0.00513338,
  0.00476747,
  0.0052644,
  0.00519621,
  0.00542974,
  0.00542974,
  0.00551037,
  0.00596791,
  0.00596791,
  0.00596791,
  0.00596791,
  0.00503465,
  0.00542644,
  0.00545345,
  0.00545345,
  0.00539272,
  0.00539272,
  0.00539272,
  0.00539272,
  0.00514047,
  0.00514047,
  0.00492363,
  0.00496019,
  0.00496019,
  0.00496604,
  0.00519863,
  0.00519227,
  0.00536378,
  0.00536378,
  0.00536378,
  0.00536378,
  0.00536378,
  0.00514604,
  0.00488364,
  0.00488364,
  0.00488364,
  0.00488364,
  0.00488364,
  0.00488364,
  0.00488364,
  0.00482977,
  0.00482977,
  0.00482977,
  0.00482977,
  0.00413362,
];

// const d = moment(new Date(dates[0])).format("MMMM Do YYYY, h:mm:ss a");
// console.log(d);

const BTC_PRICES = {
  "2020-08-01": 11354.1567,
  "2020-08-02": 11301.28,
  "2020-08-03": 11164.445,
  "2020-08-04": 11275.995,
  "2020-08-05": 11219.5,
  "2020-08-06": 11796.8174,
  "2020-08-07": 11827.265,
  "2020-08-08": 11568.5,
  "2020-08-09": 11666.45,
  "2020-08-10": 12010.28,
  "2020-08-11": 11832.5,
  "2020-08-12": 11342.01,
  "2020-08-13": 11565.095,
  "2020-08-14": 11759.5,
  "2020-08-15": 11895.627,
  "2020-08-16": 11908.33,
  "2020-08-17": 11856.5,
  "2020-08-18": 12327.5,
  "2020-08-19": 11918.5,
  "2020-08-20": 11833.8974,
  "2020-08-21": 11583.1389,
  "2020-08-22": 11674.6244,
  "2020-08-23": 11611.5,
  "2020-08-24": 11744.0127,
  "2020-08-25": 11378.726,
  "2020-08-26": 11458.8226,
  "2020-08-27": 11302.121,
  "2020-08-28": 11482.2257,
  "2020-08-29": 11515.0444,
  "2020-08-30": 11657.0039,
  "2020-08-31": 11678.3733,
  "2020-09-01": 11964.2087,
  "2020-09-02": 11795.7,
  "2020-09-03": 11302.8875,
  "2020-09-04": 10292.5983,
  "2020-09-05": 10439.5,
  "2020-09-06": 10110.44,
  "2020-09-07": 10164.13,
  "2020-09-08": 10316.5833,
  "2020-09-09": 10032.5,
  "2020-09-10": 10341.016,
  "2020-09-11": 10380.5396,
  "2020-09-12": 10436.3654,
  "2020-09-13": 10313.0686,
  "2020-09-14": 10680.2976,
  "2020-09-15": 10829.5053,
  "2020-09-16": 11033.3835,
  "2020-09-17": 10937.1113,
  "2020-09-18": 10933.9312,
  "2020-09-19": 11048.8793,
  "2020-09-20": 10852.9101,
  "2020-09-21": 10526.2029,
  "2020-09-22": 10531.1646,
  "2020-09-23": 10260.033,
  "2020-09-24": 10672.9568,
  "2020-09-25": 10729.0696,
  "2020-09-26": 10741.4765,
  "2020-09-27": 10752.3455,
  "2020-09-28": 10863.0657,
  "2020-09-29": 10764.2844,
  "2020-09-30": 10741.5796,
  "2020-10-01": 10626.601,
  "2020-10-02": 10567.3302,
  "2020-10-03": 10555.0287,
  "2020-10-04": 10660.6112,
  "2020-10-05": 10756.4046,
  "2020-10-06": 10589.6264,
  "2020-10-07": 10645.7548,
  "2020-10-08": 10897.5954,
  "2020-10-09": 11063.5317,
  "2020-10-10": 11304.4917,
  "2020-10-11": 11377.1683,
  "2020-10-12": 11545.1583,
  "2020-10-13": 11432.475,
  "2020-10-14": 11430.8717,
  "2020-10-15": 11510.5367,
  "2020-10-16": 11325.5217,
  "2020-10-17": 11369.9133,
  "2020-10-18": 11516.9667,
  "2020-10-19": 11758.5467,
  "2020-10-20": 11922.975,
  "2020-10-21": 12811.4867,
  "2020-10-22": 12987.9017,
  "2020-10-23": 12940.1067,
  "2020-10-24": 13127.055,
  "2020-10-25": 13039.0133,
  "2020-10-26": 13067.8283,
  "2020-10-27": 13638.76,
  "2020-10-28": 13276.4533,
  "2020-10-29": 13459.7983,
  "2020-10-30": 13566.925,
  "2020-10-31": 13797.1033,
  "2020-11-01": 13762.97,
  "2020-11-02": 13567.2233,
  "2020-11-03": 14030.79,
  "2020-11-04": 14158.81,
  "2020-11-05": 15593.555,
  "2020-11-06": 15589.0033,
  "2020-11-07": 14843.945,
  "2020-11-08": 15489.47,
  "2020-11-09": 15334.87,
  "2020-11-10": 15313.4433,
  "2020-11-11": 15706.54,
  "2020-11-12": 16301.0267,
  "2020-11-13": 16330.3433,
  "2020-11-14": 16075.7133,
  "2020-11-15": 15968.245,
  "2020-11-16": 16720.605,
  "2020-11-17": 17676.335,
  "2020-11-18": 17785.2667,
  "2020-11-19": 17815.0783,
  "2020-11-20": 18675.4333,
  "2020-11-21": 18697.5133,
  "2020-11-22": 18423.5133,
  "2020-11-23": 18381.7167,
  "2020-11-24": 19161.2683,
  "2020-11-25": 18723.5467,
  "2020-11-26": 17182.485,
  "2020-11-27": 17156.3033,
  "2020-11-28": 17737.9667,
  "2020-11-29": 18196.5467,
  "2020-11-30": 19708.0967,
  "2020-12-01": 18795.1967,
  "2020-12-02": 19226.22,
  "2020-12-03": 19450.2667,
  "2020-12-04": 18657.42,
  "2020-12-05": 19157.925,
  "2020-12-06": 19386.7117,
  "2020-12-07": 19185.3967,
  "2020-12-08": 18322.5533,
  "2020-12-09": 18553.92,
  "2020-12-10": 18255.9233,
  "2020-12-11": 18039.7617,
  "2020-12-12": 18811.0617,
  "2020-12-13": 19168.7533,
  "2020-12-14": 19274.8733,
  "2020-12-15": 19444.5483,
  "2020-12-16": 21349.8467,
  "2020-12-17": 22812.2817,
  "2020-12-18": 23133.2867,
  "2020-12-19": 23835.305,
  "2020-12-20": 23458.9967,
  "2020-12-21": 22718.225,
  "2020-12-22": 23817.3067,
  "2020-12-23": 23229.0133,
  "2020-12-24": 23729.6483,
  "2020-12-25": 24707.8017,
  "2020-12-26": 26445.95,
  "2020-12-27": 26248.2767,
  "2020-12-28": 27041.8667,
  "2020-12-29": 27353.9783,
  "2020-12-30": 28886.04,
  "2020-12-31": 28956.265,
  "2021-01-01": 29391.775,
  "2021-01-02": 32198.48,
  "2021-01-03": 33033.62,
  "2021-01-04": 32017.565,
  "2021-01-05": 34035.0067,
  "2021-01-06": 36826.9783,
  "2021-01-07": 39475.6067,
  "2021-01-08": 40616.7217,
  "2021-01-09": 40227.8683,
  "2021-01-10": 38191.55,
};
// {
//     "2020-10-01": BTC_PRICES["2020-10-01"],
//     "2020-10-02": BTC_PRICES["2020-10-02"],
//   }
// Object.keys(BTC_PRICES).forEach((p) => {
//   var time = "00:00";
//   let start = moment(new Date(p + " " + time));
// //   console.log();
// });
// console.log(dates.length);
function a() {
  console.log("start");

  const l = dates.length;

  dates.forEach(async (date, i) => {
    // console.log(i);
    //   const date = dates[1];
    //   i = 1;
    let start = moment(new Date(date));
    let end;
    if (i === l - 1) end = moment(new Date(date)).add(1, "day");
    else end = moment(new Date(dates[i + 1]));
    // console.log(i);

    // const now  = moment(start)
    // console.log(start.format("MMMM Do YYYY, h:mm:ss a"));
    // console.log("index", i);
    // console.log("values", values[i]);
    const price = values[i];
    const ONE = price;
    const USD = ONE_PRICES_USD[i] / price;
    const BTC = USD / BTC_PRICES[start.format("YYYY-MM-DD")];
    //   console.log(BTC);
    //   console.log(start.format("YYYY-MM-DD"));
    //   console.log(BTC_PRICES[start.format("YYYY-MM-DD")]);
    //   return;
    while (start.isBefore(end)) {
      start = start.add(5, "minutes");
      console.log(start.format("MMMM Do YYYY, h:mm:ss a"));
      const newPrice = new Chart({
        token: "5ff12e1f1725fe681c430a57",
        time: start.format(),
        USD,
        BTC,
        ONE,
      });
      await newPrice.save();
    }
  });
  console.log("done");
}
// a();
//   // const d  = moment(date).format();
// });
